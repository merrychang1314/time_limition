# 📱 手机时间限制器 - Android APK构建指南

## 🎯 目标
将手机时间限制器应用打包成Android APK文件，可以安装到Android手机上使用。

## ✅ 环境准备（已完成）
- ✅ Python 3.13 已安装
- ✅ Kivy 2.3.1 已安装
- ✅ Buildozer 1.5.0 已安装
- ✅ Cython 3.1.2 已安装
- ✅ 应用源码已准备（包含中文字体支持）
- ✅ 应用图标已创建

## 🚀 快速构建方法

### 方法一：使用快速构建脚本（推荐）
```bash
python quick_build.py
```

这个脚本会：
1. 自动准备main.py文件
2. 创建buildozer.spec配置
3. 提供详细的构建说明
4. 可选择自动执行构建

### 方法二：手动构建（最可靠）

#### 步骤1：准备文件
```bash
# 复制应用文件为main.py
copy phone_time_limiter_basic_fixed.py main.py
```

#### 步骤2：初始化buildozer（仅第一次需要）
```bash
buildozer init
```

#### 步骤3：构建APK
```bash
buildozer android debug
```

## ⏰ 构建时间说明
- **首次构建**：1-2小时（需要下载Android SDK/NDK）
- **后续构建**：10-30分钟
- **网络要求**：稳定的网络连接

## 📁 输出文件
构建成功后，APK文件位于：
```
./bin/phonelimiter-1.0-debug.apk
```

## 📲 安装到手机

### 步骤1：传输APK
- 通过USB数据线
- 通过微信/QQ发送
- 通过云盘分享

### 步骤2：允许未知来源
1. 打开手机"设置"
2. 找到"安全"或"应用管理"
3. 启用"未知来源"或"允许安装未知应用"

### 步骤3：安装APK
1. 在手机上找到APK文件
2. 点击安装
3. 授予必要权限（通话权限等）

## 🔧 常见问题解决

### 问题1：构建卡住不动
**解决方案：**
- 检查网络连接
- 重新打开命令窗口
- 使用手动构建方法

### 问题2：下载失败
**解决方案：**
- 确保网络稳定
- 可能需要科学上网
- 多次重试构建命令

### 问题3：权限错误
**解决方案：**
- 以管理员身份运行命令提示符
- 检查防火墙设置

### 问题4：APK安装失败
**解决方案：**
- 确保手机允许未知来源安装
- 检查手机存储空间
- 尝试重新下载APK文件

## 📋 buildozer.spec 配置说明

当前配置针对手机时间限制器优化：
```ini
[app]
title = 手机时间限制器
package.name = phonelimiter
package.domain = com.timelimiter
requirements = python3,kivy
android.permissions = CALL_PHONE
```

## 🎯 应用功能确认

构建的APK将包含以下功能：
- ✅ 时间限制设置（5-180分钟）
- ✅ 倒计时显示
- ✅ 时间到后限制模式
- ✅ 仅允许拨打电话
- ✅ 密码解锁功能
- ✅ 中文界面支持
- ✅ 设置保存功能

## 🔄 重新构建

如果需要修改应用后重新构建：
1. 修改源码文件
2. 复制为main.py
3. 执行：`buildozer android debug`

## 📞 技术支持

如果遇到问题：
1. 检查本指南的常见问题部分
2. 确保所有依赖都已正确安装
3. 尝试清理构建缓存：`buildozer android clean`

---

## 🎉 构建成功后

恭喜！您现在拥有了一个完整的Android时间限制应用：
- 📱 可以安装到任何Android设备
- 🔒 实现设定时间后的使用限制
- ☎️ 保留紧急通话功能
- 🔐 密码保护解锁机制

享受您的数字健康管理工具！